import{r as l,i as k,h as W,j as e}from"./index-BI0Y4PNa.js";import{c as A}from"./config-DOW8WNQj.js";import{C as p,G as h}from"./CustomTextField-BNAEdO5y.js";import{S as T}from"./Snackbar-BaKyCAh_.js";import{A as L}from"./Alert-BpR8cUDB.js";import{T as m,B as n}from"./Box-BJAbsDBA.js";import{S as f}from"./Stack-LMifGq4A.js";import{B as I}from"./Button-B8VGVutO.js";import{A as P}from"./AuthLogo-DhoCKfaN.js";import{C as B}from"./Card-CjfQfeJx.js";import"./Paper-lRVHHjor.js";import"./TextField-Dw7vWCpn.js";import"./useSlot-CJdQ5ZsT.js";import"./resolveComponentProps-CfG3k9Ot.js";import"./useForkRef-B4TTIjar.js";import"./useId-ByUH1QbO.js";import"./useFormControl-Dk5vMOYt.js";import"./isHostComponent-Db4o0x6b.js";import"./FormControl-B38JvpjD.js";import"./isMuiElement-DJAIeLqF.js";import"./Modal-B90qlw3v.js";import"./ownerDocument-DW-IO8s5.js";import"./ButtonBase-vmhUyOZL.js";import"./createChainedFunction-BO_9K8Jh.js";import"./Menu-CBkDRKwd.js";import"./mergeSlotProps-DGSwv7r8.js";import"./useControlled-eCEPnpab.js";import"./createSvgIcon-sw-kBliC.js";import"./Close-BXD-Rx-Y.js";import"./IconButton-DxZcyvTB.js";import"./CircularProgress-N9GwNpy4.js";import"./useThemeProps-BVG176lN.js";const E=({title:d,subtitle:x,subtext:g})=>{const[i,j]=l.useState(""),[c,b]=l.useState(""),v=k(),{setToken:y,setProfile:S}=W(),[w,t]=l.useState(!1),[u,a]=l.useState(""),C=async r=>{if(r.preventDefault(),!i||!c){a("Please enter your username and password"),t(!0);return}try{const s=await fetch(`${A.rutaApi}login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:i,password:c})});if(!s.ok)throw new Error(`Error HTTP: ${s.status}`);const o=await s.json();o.status==="success"?(o.token&&(y(o.token),sessionStorage.setItem("name_user",o.name_user),sessionStorage.setItem("username",i),S(Number(o.system_profile)||0)),a("Welcome, Successful Login!"),t(!0),setTimeout(()=>{v("/dashboard")},2e3)):(a("Incorrect username or password"),t(!0))}catch(s){console.error("Error al manejar el login:",s),a("Error al iniciar sesión. Por favor, inténtalo de nuevo más tarde."),t(!0)}};return e.jsxs(e.Fragment,{children:[e.jsx(T,{open:w,autoHideDuration:u==="Welcome, Successful Login!"?2e3:4e3,onClose:()=>t(!1),children:e.jsx(L,{onClose:()=>t(!1),severity:u==="Welcome, Successful Login!"?"success":"warning",sx:{width:"100%"},children:u})}),e.jsxs("form",{onSubmit:C,children:[d?e.jsx(m,{fontWeight:"700",variant:"h2",mb:1,children:d}):null,g,e.jsxs(f,{children:[e.jsxs(n,{children:[e.jsx(m,{variant:"subtitle1",fontWeight:500,component:"label",htmlFor:"username",mb:"5px",children:"Username"}),e.jsx(p,{id:"username",variant:"outlined",fullWidth:!0,value:i,onChange:r=>j(r.target.value)})]}),e.jsxs(n,{mt:"25px",children:[e.jsx(m,{variant:"subtitle1",fontWeight:500,component:"label",htmlFor:"password",mb:"5px",children:"Password"}),e.jsx(p,{id:"password",type:"password",variant:"outlined",fullWidth:!0,value:c,onChange:r=>b(r.target.value)})]})]}),e.jsx(n,{mt:3,children:e.jsx(I,{variant:"contained",size:"large",fullWidth:!0,type:"submit",sx:{backgroundColor:"#0D4B3B","&:hover":{backgroundColor:"#093828"}},children:"Log In"})}),x]})]})},de=()=>e.jsx(n,{sx:{position:"relative","&:before":{content:'""',background:"radial-gradient(#d2f1df, #d3d7fa, #bad8f4)",backgroundSize:"400% 400%",animation:"gradient 15s ease infinite",position:"absolute",height:"100%",width:"100%",opacity:"0.3"}},children:e.jsx(h,{container:!0,spacing:0,justifyContent:"center",sx:{height:"100vh"},children:e.jsx(h,{item:!0,xs:12,sm:12,lg:4,xl:3,display:"flex",justifyContent:"center",alignItems:"center",children:e.jsxs(B,{elevation:9,sx:{p:4,zIndex:1,width:"100%",maxWidth:"500px"},children:[e.jsx(n,{display:"flex",alignItems:"center",justifyContent:"center",children:e.jsx(P,{})}),e.jsx(E,{subtext:e.jsx(m,{variant:"subtitle1",textAlign:"center",color:"textSecondary",mb:1}),subtitle:e.jsx(f,{direction:"row",spacing:1,justifyContent:"center",mt:3})})]})})})});export{de as default};
