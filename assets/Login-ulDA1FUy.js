import{r as l,i as C,h as k,j as e}from"./index-CJU5MQjK.js";import{c as W}from"./config-BwmyTBcy.js";import{C as p,G as h}from"./CustomTextField-BblrHvIU.js";import{S as A,A as T}from"./Snackbar-CfH3m9VF.js";import{T as m,B as o}from"./Box-n9iJj8RL.js";import{S as x}from"./Stack-gaJ9mtYc.js";import{B as L}from"./Button-BIdsfCL6.js";import{A as I}from"./AuthLogo-D9z2zf2a.js";import{C as B}from"./Card-Ct6aUZJP.js";import"./Paper-DuLtMsh8.js";import"./TextField-BpfY5uKK.js";import"./useSlot-xazagwgq.js";import"./resolveComponentProps-DPIZlf2G.js";import"./useForkRef-B6FfdXhL.js";import"./useId-DE-kZWW2.js";import"./useFormControl-DUBBWsnW.js";import"./isHostComponent-DzRytwJ7.js";import"./FormControl-CoKhAxmx.js";import"./isMuiElement-DjPusY45.js";import"./Menu-Bof1kA2Y.js";import"./ButtonBase-CejpV3EC.js";import"./mergeSlotProps-BP1cH13_.js";import"./createChainedFunction-BO_9K8Jh.js";import"./useControlled-BYV30LQr.js";import"./createSvgIcon-Cr6Zc33o.js";import"./Close-BhbCqjDF.js";import"./IconButton-B5dw_sXu.js";import"./CircularProgress-CjQlrGo0.js";import"./useThemeProps-DLxooYuZ.js";const E=({title:d,subtitle:f,subtext:g})=>{const[n,j]=l.useState(""),[c,b]=l.useState(""),v=C(),{setToken:y}=k(),[S,t]=l.useState(!1),[u,i]=l.useState(""),w=async r=>{if(r.preventDefault(),!n||!c){i("Please enter your username and password"),t(!0);return}try{const s=await fetch(`${W.rutaApi}login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n,password:c})});if(!s.ok)throw new Error(`Error HTTP: ${s.status}`);const a=await s.json();a.status==="success"?(a.token&&(y(a.token),sessionStorage.setItem("name_user",a.name_user),sessionStorage.setItem("username",n)),i("Welcome, Successful Login!"),t(!0),setTimeout(()=>{v("/dashboard")},2e3)):(i("Incorrect username or password"),t(!0))}catch(s){console.error("Error al manejar el login:",s),i("Error al iniciar sesión. Por favor, inténtalo de nuevo más tarde."),t(!0)}};return e.jsxs(e.Fragment,{children:[e.jsx(A,{open:S,autoHideDuration:u==="Welcome, Successful Login!"?2e3:4e3,onClose:()=>t(!1),children:e.jsx(T,{onClose:()=>t(!1),severity:u==="Welcome, Successful Login!"?"success":"warning",sx:{width:"100%"},children:u})}),e.jsxs("form",{onSubmit:w,children:[d?e.jsx(m,{fontWeight:"700",variant:"h2",mb:1,children:d}):null,g,e.jsxs(x,{children:[e.jsxs(o,{children:[e.jsx(m,{variant:"subtitle1",fontWeight:500,component:"label",htmlFor:"username",mb:"5px",children:"Username"}),e.jsx(p,{id:"username",variant:"outlined",fullWidth:!0,value:n,onChange:r=>j(r.target.value)})]}),e.jsxs(o,{mt:"25px",children:[e.jsx(m,{variant:"subtitle1",fontWeight:500,component:"label",htmlFor:"password",mb:"5px",children:"Password"}),e.jsx(p,{id:"password",type:"password",variant:"outlined",fullWidth:!0,value:c,onChange:r=>b(r.target.value)})]})]}),e.jsx(o,{mt:3,children:e.jsx(L,{variant:"contained",size:"large",fullWidth:!0,type:"submit",sx:{backgroundColor:"#0D4B3B","&:hover":{backgroundColor:"#093828"}},children:"Log In"})}),f]})]})},le=()=>e.jsx(o,{sx:{position:"relative","&:before":{content:'""',background:"radial-gradient(#d2f1df, #d3d7fa, #bad8f4)",backgroundSize:"400% 400%",animation:"gradient 15s ease infinite",position:"absolute",height:"100%",width:"100%",opacity:"0.3"}},children:e.jsx(h,{container:!0,spacing:0,justifyContent:"center",sx:{height:"100vh"},children:e.jsx(h,{item:!0,xs:12,sm:12,lg:4,xl:3,display:"flex",justifyContent:"center",alignItems:"center",children:e.jsxs(B,{elevation:9,sx:{p:4,zIndex:1,width:"100%",maxWidth:"500px"},children:[e.jsx(o,{display:"flex",alignItems:"center",justifyContent:"center",children:e.jsx(I,{})}),e.jsx(E,{subtext:e.jsx(m,{variant:"subtitle1",textAlign:"center",color:"textSecondary",mb:1}),subtitle:e.jsx(x,{direction:"row",spacing:1,justifyContent:"center",mt:3})})]})})})});export{le as default};
