import{i as B,r as o,j as e}from"./index-B9c6G4RU.js";import{B as p,C as g}from"./BaseCard-B7xEBDih.js";import{c as L}from"./config-DOW8WNQj.js";import{I as E}from"./search-Cu_u-BJp.js";import{T as r,B as A}from"./Box-DY5rMG6q.js";import{T as _,a as z,b as I,c as S,d as s,e as H}from"./TableRow-owgTIb2d.js";import{S as b}from"./Stack-C9oTHJwp.js";import"./Card-DY8qMz7M.js";import"./Paper-Djww9Kda.js";import"./createSvgIcon-CuCLOW51.js";import"./useForkRef-bxOkU-Fv.js";import"./ButtonBase-DaiUm-zC.js";import"./Divider-CID0eBmV.js";import"./CardContent-B0TW8JlS.js";import"./TextField-BzY1DWUU.js";import"./useSlot--7nv0rPO.js";import"./resolveComponentProps-lSV5xpUt.js";import"./useId--VlEiZJx.js";import"./useFormControl-iTPikZFj.js";import"./isHostComponent-kiJGbep4.js";import"./FormControl-FjhdrhiG.js";import"./isMuiElement-DYmjoWWl.js";import"./Modal-sn2O3BuZ.js";import"./ownerDocument-DW-IO8s5.js";import"./createChainedFunction-BO_9K8Jh.js";import"./Menu-Dm3AkTow.js";import"./mergeSlotProps-CeBRw_gE.js";import"./useControlled-knxWmPfA.js";import"./InputAdornment-BIIeC6kB.js";import"./IconButton-Xr0163ay.js";import"./CircularProgress-16haAPjs.js";import"./useThemeProps-D6hNwDDy.js";const fe=()=>{const w=B(),[l,C]=o.useState([]),[T,h]=o.useState([]),[v,x]=o.useState(!0),[a,f]=o.useState("");o.useEffect(()=>{const t=sessionStorage.getItem("token");if(!t){console.error("Token no encontrado"),x(!1);return}const n=new Headers;n.append("authToken",t);const N={method:"GET",headers:n,redirect:"follow"};fetch(`${L.rutaApi}users_system_list`,N).then(i=>i.json()).then(i=>{if(i.dataUsers){const u=i.dataUsers.map(c=>{const j=c.userStatus;let d,m;return j===1?(d="Active",m="success.main"):j===2?(d="Not Active",m="error.main"):(d="A stranger",m="warning.main"),{id:c.id_userSystem,name:c.first_name,lastName:c.last_name,status:d,pbg:m,href:"Edit",pbg_href:"primary.main"}});C(u),h(u)}}).catch(i=>{console.error("Error al obtener usuarios:",i)}).finally(()=>{x(!1)})},[]),o.useEffect(()=>{if(a==="")h(l);else{const t=l.filter(n=>n.name.toLowerCase().includes(a.toLowerCase())||n.lastName.toLowerCase().includes(a.toLowerCase()));h(t)}},[a,l]);const y=t=>{f(t)},k=()=>{f("")},U=t=>{w("/form-layouts")};return v?e.jsx(p,{title:"Loading...",children:e.jsx(r,{children:"Cargando usuarios..."})}):l.length===0?e.jsx(p,{title:"Users",children:e.jsx(r,{children:"No se encontraron usuarios"})}):e.jsx(p,{title:e.jsxs(A,{sx:{display:"flex",alignItems:"center",width:"100%",gap:{xs:2,sm:4},flexDirection:{xs:"column",sm:"row"}},children:[e.jsx(r,{variant:"h5",sx:{width:{xs:"100%",sm:"auto"},textAlign:{xs:"left",sm:"inherit"}},children:"Users"}),e.jsx(E,{searchTerm:a,onSearchChange:y,onClearSearch:k,placeholder:"Buscar usuarios...",width:{xs:"100%",sm:300,md:400}})]}),children:e.jsx(_,{sx:{width:{xs:"100%",sm:"100%"},overflowX:"auto"},children:e.jsxs(z,{"aria-label":"simple table",sx:{whiteSpace:"nowrap"},children:[e.jsx(I,{children:e.jsxs(S,{children:[e.jsx(s,{children:e.jsx(r,{variant:"subtitle1",children:"No."})}),e.jsx(s,{children:e.jsx(r,{variant:"subtitle1",children:"First Name"})}),e.jsx(s,{children:e.jsx(r,{variant:"subtitle1",children:"Last Name"})}),e.jsx(s,{children:e.jsx(r,{variant:"subtitle1",children:"User Status"})}),e.jsx(s,{children:e.jsx(r,{variant:"subtitle1",children:"Action"})})]})}),e.jsx(H,{children:T.map(t=>e.jsxs(S,{children:[e.jsx(s,{children:e.jsx(r,{fontSize:"15px",fontWeight:500,children:t.id})}),e.jsx(s,{children:e.jsx(r,{color:"textSecondary",fontSize:"14px",children:t.name})}),e.jsx(s,{children:e.jsx(r,{color:"textSecondary",fontSize:"14px",children:t.lastName})}),e.jsx(s,{children:e.jsx(b,{direction:"row",spacing:1,children:e.jsx(g,{label:t.status,sx:{backgroundColor:t.pbg,color:"white",fontWeight:"600",fontSize:"0.75rem"}})})}),e.jsx(s,{children:e.jsx(b,{direction:"row",spacing:1,children:e.jsx(g,{label:t.href,onClick:()=>U(t.id),sx:{backgroundColor:"#0D4B3B",color:"white",fontWeight:"600",fontSize:"0.75rem",cursor:"pointer","&:hover":{backgroundColor:"#0a3d32"}}})})})]},t.id))})]})})})};export{fe as default};
