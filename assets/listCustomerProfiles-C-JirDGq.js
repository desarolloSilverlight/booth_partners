import{i as v,r as l,j as e}from"./index-vVrmdSAi.js";import{B as w}from"./BaseCard-CHoophF0.js";import{c as k}from"./config-DOW8WNQj.js";import{B as p,T as c}from"./Box-Dmp19RYy.js";import{C as B}from"./CircularProgress-BMD9XlnO.js";import{A as E}from"./Alert-DHv-Uhwv.js";import{T as S,a as P,b as H,c as g,d as m,e as I}from"./TableRow-DkdFhzZT.js";import{B as N}from"./Button-DACH_hqE.js";import"./Card-BOVImWUe.js";import"./Paper-MwjgWMcl.js";import"./createSvgIcon-BaC4K_Lt.js";import"./useForkRef-DlMLD4qL.js";import"./ButtonBase-CN8m9IWH.js";import"./Divider-BlS2FaE6.js";import"./CardContent-sb6ukAQg.js";import"./useSlot-CSLy36Ib.js";import"./resolveComponentProps-CQBDKyOr.js";import"./Close-D6z-B9do.js";import"./IconButton-6ObsHBT5.js";import"./useId-DPAP9_GE.js";const ee=()=>{const n=v(),[h,j]=l.useState([]),[C,b]=l.useState(!0),[y,A]=l.useState(null);l.useEffect(()=>{(async()=>{try{const o=sessionStorage.getItem("token");if(!o){n("/auth/login");return}const d=new Headers;d.append("authToken",o),d.append("Content-Type","application/json");const u=await fetch(`${k.rutaApi}employee_system_list`,{method:"GET",headers:d});if(u.status===401){sessionStorage.removeItem("token"),n("/auth/login");return}if(!u.ok)throw new Error("Failed to fetch customers");const r=await u.json(),f=[],x=new Set;let a=[];if(Array.isArray(r))a=r;else if(r.employees&&Array.isArray(r.employees))a=r.employees;else if(r.data&&Array.isArray(r.data))a=r.data;else if(r.list&&Array.isArray(r.list))a=r.list;else if(r.results&&Array.isArray(r.results))a=r.results;else{const t=Object.keys(r).find(s=>Array.isArray(r[s]));t&&(a=r[t])}a.forEach(t=>{const s=t==null?void 0:t.customer;s&&typeof s=="string"&&s.trim()!==""&&!x.has(s)&&(x.add(s),f.push({customer:s}))}),f.sort((t,s)=>t.customer.localeCompare(s.customer)),j(f)}catch(o){A(o.message||"Error loading customers"),console.error("Error fetching customers:",o)}finally{b(!1)}})()},[n]);const T=i=>{n(`/profiles/customerProfile?nameCustomer=${encodeURIComponent(i)}`)};return e.jsx(w,{title:"Customers Profiles",children:e.jsx(p,{children:C?e.jsx(p,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"300px",children:e.jsx(B,{})}):y?e.jsx(E,{severity:"error",sx:{mb:2},children:y}):h.length===0?e.jsx(p,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"300px",children:e.jsx(c,{variant:"body1",color:"text.secondary",children:"No customers found"})}):e.jsx(S,{sx:{boxShadow:"none",border:"1px solid #eee",borderRadius:2},children:e.jsxs(P,{"aria-label":"customers table",children:[e.jsx(H,{children:e.jsxs(g,{children:[e.jsx(m,{children:e.jsx(c,{variant:"h6",fontWeight:600,children:"Customer Name"})}),e.jsx(m,{align:"center",children:e.jsx(c,{variant:"h6",fontWeight:600,children:"Actions"})})]})}),e.jsx(I,{children:h.map((i,o)=>e.jsxs(g,{hover:!0,children:[e.jsx(m,{children:e.jsx(c,{variant:"body1",fontWeight:500,children:i.customer})}),e.jsx(m,{align:"center",children:e.jsx(N,{variant:"contained",size:"small",onClick:()=>T(i.customer),sx:{backgroundColor:"#0D4B3B",color:"#ffffff",textTransform:"none","&:hover":{backgroundColor:"#0a3d32"}},children:"View Profile"})})]},o))})]})})})})};export{ee as default};
