import{j as e,i as I,f as M,r}from"./index-c61RoRFK.js";import{c as P}from"./createSvgIcon-C3owckrH.js";import{c as v}from"./config-BwmyTBcy.js";import{B as O}from"./BaseCard-BJxMFc6A.js";import{S as E,A as N}from"./Snackbar-B7dsYuY1.js";import{T as a}from"./TextField-CPKeoVJw.js";import{I as y}from"./InputAdornment-HNhBnErJ.js";import{I as C}from"./IconButton-FWKI9l2P.js";import{B as W}from"./Button-Di7pCCRT.js";import{G as b}from"./Grid2-vCS5JrFL.js";import"./Box-gDR6qJ3r.js";import"./Card-BD9dg0Gx.js";import"./Paper-zWtH7ucq.js";import"./useForkRef-D6UyK2N_.js";import"./ButtonBase-DFHw14RL.js";import"./Divider-C_Y5NlQ7.js";import"./CardContent-D_JwTUZ-.js";import"./useSlot-MByqjjN3.js";import"./resolveComponentProps-CL_1EyJ_.js";import"./Close-B9kuC8RT.js";import"./Menu-CcB7RIDV.js";import"./isHostComponent-CdAxFvx2.js";import"./mergeSlotProps-B9apfIWs.js";import"./createChainedFunction-BO_9K8Jh.js";import"./useId-CAERvijh.js";import"./useFormControl-DvaG5NQm.js";import"./FormControl-xr9gSJXb.js";import"./isMuiElement-TiuxXHz1.js";import"./useControlled-BZSoD8fk.js";import"./CircularProgress-Beq4xJ7S.js";import"./useThemeProps-CanFT41Z.js";const S=P(e.jsx("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility"),w=P(e.jsx("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"}),"VisibilityOff"),B=()=>{const k=I();M();const[c,l]=r.useState([]),[o,h]=r.useState(null),[s,f]=r.useState({id_userSystem:"",first_name:"",last_name:"",emailLog:"",passLog:"",contry:"",systemProfile:"",userStatus:""}),[m,L]=r.useState(""),[g,A]=r.useState(!1),[x,T]=r.useState(!1),u=sessionStorage.getItem("token"),d=sessionStorage.getItem("username");if(!u){k("/auth/login");return}r.useEffect(()=>{d&&fetch(`${v.rutaApi}data_user_system`,{method:"POST",headers:{"Content-Type":"application/json",authToken:u},body:JSON.stringify({username:d})}).then(t=>t.json()).then(t=>{t.dataUser&&f(t.dataUser)})},[d]);const n=t=>{f({...s,[t.target.name]:t.target.value})},_=async()=>{try{(await fetch(`${v.rutaApi}updata_data`,{method:"POST",headers:{"Content-Type":"application/json",authToken:u},body:JSON.stringify(s)})).ok?(l(i=>[...i,{msg:"Data saved successfully",severity:"success"}]),setTimeout(()=>{window.location.reload()},1500)):l(i=>[...i,{msg:"Error saving the data",severity:"error"}])}catch{l(i=>[...i,{msg:"Network error while saving",severity:"error"}])}};r.useEffect(()=>{!o&&c.length>0&&(h(c[0]),l(t=>t.slice(1)))},[c,o]);const j=()=>{h(null)},p=s.passLog===m;return e.jsxs("div",{children:[e.jsx(E,{open:!!o,autoHideDuration:2e3,onClose:j,anchorOrigin:{vertical:"top",horizontal:"center"},children:o?e.jsx(N,{onClose:j,severity:o.severity,sx:{width:"100%"},children:o.msg}):e.jsx("span",{})}),e.jsx(O,{title:"My Profile",children:e.jsxs("form",{children:[e.jsx(a,{name:"first_name",label:"First Name",variant:"outlined",value:s.first_name,onChange:n,fullWidth:!0,sx:{mb:2}}),e.jsx(a,{name:"last_name",label:"Last Name",variant:"outlined",value:s.last_name,onChange:n,fullWidth:!0,sx:{mb:2}}),e.jsx(a,{name:"emailLog",label:"Email",type:"email",variant:"outlined",value:s.emailLog,onChange:n,fullWidth:!0,sx:{mb:2}}),e.jsx(a,{name:"passLog",label:"Password",type:g?"text":"password",variant:"outlined",value:s.passLog,onChange:n,fullWidth:!0,sx:{mb:2},InputProps:{endAdornment:e.jsx(y,{position:"end",children:e.jsx(C,{onClick:()=>A(t=>!t),edge:"end",children:g?e.jsx(w,{}):e.jsx(S,{})})})}}),e.jsx(a,{name:"confirmPass",label:"Confirm Password",type:x?"text":"password",variant:"outlined",value:m,onChange:t=>L(t.target.value),fullWidth:!0,sx:{mb:2},error:m.length>0&&!p,helperText:m.length>0&&!p?"Passwords do not match":"",InputProps:{endAdornment:e.jsx(y,{position:"end",children:e.jsx(C,{onClick:()=>T(t=>!t),edge:"end",children:x?e.jsx(w,{}):e.jsx(S,{})})})}}),e.jsx(a,{name:"contry",label:"Country",variant:"outlined",value:s.contry,onChange:n,fullWidth:!0,sx:{mb:2}}),e.jsx("div",{children:e.jsx(W,{variant:"contained",onClick:_,sx:{backgroundColor:"#093828","&:hover":{backgroundColor:"#06281a"}},disabled:!p||s.passLog==="",children:"Save"})})]})})]})},fe=()=>e.jsx(b,{container:!0,spacing:0,children:e.jsx(b,{size:{sm:12},children:e.jsx(B,{})})});export{fe as default};
